local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")

local player = Players.LocalPlayer

-- Hide Roblox core UI elements
StarterGui:SetCore("TopbarEnabled", false)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, false)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, false)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, false)

-- Try to hide new TextChatService chat UI manually
task.spawn(function()
    local tries = 0
    while tries < 20 do
        local chatUI = player:FindFirstChild("PlayerGui") and player.PlayerGui:FindFirstChild("Chat")
        if chatUI then
            chatUI.Enabled = false
            chatUI:Destroy()
            break
        end
        tries += 1
        task.wait(0.5)
    end
end)

-- Create blackout ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.IgnoreGuiInset = true
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local blackFrame = Instance.new("Frame")
blackFrame.Size = UDim2.new(1, 0, 1, 0)
blackFrame.Position = UDim2.new(0, 0, 0, 0)
blackFrame.BackgroundColor3 = Color3.new(0, 0, 0)
blackFrame.BackgroundTransparency = 0
blackFrame.Parent = screenGui

local textLabel = Instance.new("TextLabel")
textLabel.Size = UDim2.new(1, 0, 0.2, 0)
textLabel.Position = UDim2.new(0, 0, 0.4, 0)
textLabel.BackgroundTransparency = 1
textLabel.Text = "Please wait..."
textLabel.TextColor3 = Color3.new(1, 1, 1)
textLabel.TextScaled = true
textLabel.Font = Enum.Font.SourceSansBold
textLabel.Parent = blackFrame

-- Close button to remove blackout
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 150, 0, 50)
closeButton.Position = UDim2.new(0.5, -75, 0.6, 0)
closeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.Text = "Close"
closeButton.Font = Enum.Font.SourceSansBold
closeButton.TextScaled = true
closeButton.Parent = blackFrame

closeButton.MouseButton1Click:Connect(function()
    -- Restore UI elements
    StarterGui:SetCore("TopbarEnabled", true)
    StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, true)
    StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, true)
    StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, true)

    -- Remove blackout GUI
    screenGui:Destroy()
end)
